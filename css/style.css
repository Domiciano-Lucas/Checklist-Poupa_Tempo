body { font-family: 'Inter', sans-serif; }

/* CORREÇÃO APLICADA AQUI: !important para forçar o desaparecimento */
.hidden-screen { display: none !important; }

.conditional-field { display: none; }

/* Força o login a ocupar toda a tela */
#login-screen {
    display: none; /* será controlado pelo JS */
}
#login-screen.active {
    display: flex !important;
}

/* Animações de Loading */
@keyframes spin { to { transform: rotate(360deg); } }
.spinner {
    border: 4px solid rgba(0, 0, 0, 0.1);
    border-left-color: #2563eb;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    animation: spin 1s linear infinite;
}
.spinner-small {
    width: 20px;
    height: 20px;
    border-width: 2px;
}

/* ======================================================
   TOGGLE SWITCH SIMPLES (USADO NO HEADER - DARK MODE)
   ====================================================== */
.toggle-container {
    display: flex;
    align-items: center;
    cursor: pointer;
    user-select: none;
}
.toggle-track {
    position: relative;
    width: 56px;
    height: 32px;
    background-color: #d1d5db;
    border-radius: 9999px;
    box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
    transition: background-color 0.3s;
}
.toggle-dot {
    position: absolute;
    left: 4px;
    top: 4px;
    width: 24px;
    height: 24px;
    background-color: white;
    border-radius: 50%;
    transition: transform 0.3s;
}

/* Estado Ativado (Dark Mode) */
#dark-mode-toggle:checked + .toggle-container .toggle-track {
    background-color: #2563eb;
}
#dark-mode-toggle:checked + .toggle-container .toggle-dot {
    transform: translateX(24px);
    background-color: #1f2937;
}

/* ======================================================
   MODO ESCURO GLOBAL
   ====================================================== */
.dark {
    background-color: #111827 !important;
    color: #f3f4f6 !important;
}
.dark * { transition: background-color 0.3s, color 0.3s, border-color 0.3s !important; }
.dark .bg-white { background-color: #1f2937 !important; }
.dark .bg-gray-50 { background-color: #111827 !important; }
.dark .bg-gray-100 { background-color: #374151 !important; }
.dark .bg-gray-200 { background-color: #4b5563 !important; }
.dark .bg-blue-600 { background-color: #2563eb !important; }
.dark .bg-red-600 { background-color: #dc2626 !important; }
.dark .bg-green-600 { background-color: #16a34a !important; }
.dark .text-gray-800 { color: #e5e7eb !important; }
.dark .text-gray-700 { color: #d1d5db !important; }
.dark .text-gray-600 { color: #d1d5db !important; }
.dark .text-gray-900 { color: #f9fafb !important; }
.dark .border-gray-200 { border-color: #374151 !important; }
.dark input, .dark select, .dark textarea {
    background-color: #374151 !important;
    color: white !important;
    border-color: #4b5563 !important;
}
.dark input::placeholder { color: #9ca3af !important; }

/* ======================================================
   NOVO: SWITCH DE 3 ESTADOS (SALAS)
   ====================================================== */
.tri-state-toggle-group {
    position: relative;
    width: 100%;
    max-width: 400px; /* Limita a largura para não ficar gigante */
    margin: 0 auto;
}

.toggle-track-3state {
    position: relative;
    display: grid;
    grid-template-columns: 1fr 1fr 1fr; /* 3 colunas iguais */
    height: 50px;
    background-color: #e5e7eb; /* gray-200 */
    border-radius: 99px;
    padding: 4px;
    box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
}

.dark .toggle-track-3state {
    background-color: #374151; /* gray-700 */
}

/* Labels (Textos clicáveis) */
.toggle-label-3state {
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 0.9rem;
    color: #6b7280; /* gray-500 default */
    z-index: 10;
    cursor: pointer;
    text-align: center;
    transition: color 0.3s ease;
    user-select: none;
}

.dark .toggle-label-3state {
    color: #9ca3af; /* gray-400 */
}

/* O "Handle" (Botão branco que se move) */
.toggle-handle-3state {
    position: absolute;
    top: 4px;
    left: 4px;
    width: calc(33.333% - 4px); /* Ocupa 1/3 menos padding */
    height: 42px;
    background-color: white;
    border-radius: 99px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.15);
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 5;
}

.dark .toggle-handle-3state {
    background-color: #1f2937; /* gray-800 */
}

/* === LÓGICA DE MOVIMENTO DO HANDLE === */

/* 1. Centro (Neutro/Default) */
.toggle-input-neutro:checked ~ .toggle-track-3state .toggle-handle-3state {
    transform: translateX(100%); /* Move para o meio (100% da largura dele mesmo) */
}

/* 2. Esquerda (Aberta) */
.toggle-input-aberta:checked ~ .toggle-track-3state .toggle-handle-3state {
    transform: translateX(0%); /* Fica no início */
}

/* 3. Direita (Fechada) */
.toggle-input-fechada:checked ~ .toggle-track-3state .toggle-handle-3state {
    transform: translateX(205%); /* Move para o final (aprox 200% + ajuste visual) */
}

/* === LÓGICA DE CORES DO TEXTO === */

/* Quando ABERTA está selecionada -> Texto fica AZUL */
.toggle-input-aberta:checked ~ .toggle-track-3state .label-left {
    color: #1d4ed8; /* blue-700 */
}
.dark .toggle-input-aberta:checked ~ .toggle-track-3state .label-left {
    color: #60a5fa; /* blue-400 */
}

/* Quando FECHADA está selecionada -> Texto fica VERMELHO */
.toggle-input-fechada:checked ~ .toggle-track-3state .label-right {
    color: #dc2626; /* red-600 */
}
.dark .toggle-input-fechada:checked ~ .toggle-track-3state .label-right {
    color: #f87171; /* red-400 */
}